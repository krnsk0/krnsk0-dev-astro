---
import { GoogleFontsOptimizer } from 'astro-google-fonts-optimizer';
import '../reset.css';
import '../globals.css';
import { SEO } from 'astro-seo';
import ColorMode from './ColorMode.astro';
const { title, description } = Astro.props;
---

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width" />
  <script>
    // since it seems astro doesn't let us include an html elem manually...
    document.documentElement.setAttribute('lang', 'en');
  </script>
  <ColorMode />
  <link rel="icon" type="image/svg+xml" href="/favicon.ico" />
  <SEO title={`${title} | krnsk0.dev`} description={description} />
  <GoogleFontsOptimizer
    url="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono&family=IBM+Plex+Sans:wght@400;500&family=Open+Sans:wght@500&display=swap"
  />
  <script
    src="https://cdn.lr-in-prod.com/LogRocket.min.js"
    crossorigin="anonymous"
  ></script>
  <script>
    window.LogRocket && window.LogRocket.init('z0jb7c/krnsk0-dev-astro');
    function makeUUID() {
      return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, (c) =>
        (
          c ^
          (crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (c / 4)))
        ).toString(16)
      );
    }
    const persistedUUID = window.localStorage.getItem('uuid');
    const hasPersistedUUID = typeof persistedUUID === 'string';
    let UUID;
    if (!hasPersistedUUID) {
      UUID = makeUUID();
      window.localStorage.setItem('uuid', UUID);
    } else {
      UUID = persistedUUID;
    }
    LogRocket.identify(UUID);
  </script>
</head>
